<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blitz Buffet - All You Can Eat Game</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: monospace;
      touch-action: manipulation; /* Prevent zoom on double tap */
      -webkit-user-select: none; /* Prevent text selection on iOS */
      user-select: none;
    }
    button {
      touch-action: manipulation; /* Instant tap response */
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const FOODS = [
      // Good foods (positive points)
      { emoji: 'üçï', name: 'Pizza', points: 10 },
      { emoji: 'üçî', name: 'Burger', points: 15 },
      { emoji: 'üå≠', name: 'Hot Dog', points: 8 },
      { emoji: 'üçó', name: 'Chicken', points: 12 },
      { emoji: 'üçñ', name: 'Meat', points: 14 },
      { emoji: 'ü•©', name: 'Steak', points: 20 },
      { emoji: 'üç∞', name: 'Cake', points: 18 },
      { emoji: 'üç©', name: 'Donut', points: 10 },
      { emoji: 'üç™', name: 'Cookie', points: 8 },
      { emoji: 'üç¶', name: 'Ice Cream', points: 12 },
      { emoji: 'üçü', name: 'Fries', points: 10 },
      { emoji: 'üåÆ', name: 'Taco', points: 15 },
      { emoji: 'üçï', name: 'Pizza Slice', points: 10 },
      { emoji: 'ü•ì', name: 'Bacon', points: 16 },
      
      // Bad foods (vegetables - game over if 3 eaten)
      { emoji: 'ü•¶', name: 'Broccoli', points: 0, isVegetable: true },
      { emoji: 'ü•ï', name: 'Carrot', points: 0, isVegetable: true },
      { emoji: 'ü•¨', name: 'Lettuce', points: 0, isVegetable: true },
      { emoji: 'ü•í', name: 'Cucumber', points: 0, isVegetable: true },
      { emoji: 'üåΩ', name: 'Corn', points: 0, isVegetable: true },
    ];

    function BuffetGame() {
      const [score, setScore] = useState(0);
      const [foodItems, setFoodItems] = useState([]);
      const [mouthOpen, setMouthOpen] = useState(false);
      const [feedback, setFeedback] = useState(null);
      const [gameStarted, setGameStarted] = useState(false);
      const [highScore, setHighScore] = useState(0);
      const [audioContext, setAudioContext] = useState(null);
      const [speedMultiplier, setSpeedMultiplier] = useState(1);
      const [currentMilestone, setCurrentMilestone] = useState(300);
      const [celebrating, setCelebrating] = useState(false);
      const [celebrationItems, setCelebrationItems] = useState([]);
      const [celebrationType, setCelebrationType] = useState('candy'); // alternates between 'candy' and 'figure8'
      const [vegetablesEaten, setVegetablesEaten] = useState(0);
      const [gameOver, setGameOver] = useState(false);
      const [bonusChicken, setBonusChicken] = useState(null);
      const [chickensSpawned, setChickensSpawned] = useState(0);

      // Initialize audio context on first user interaction (iOS requirement)
      const initAudio = () => {
        if (!audioContext) {
          const ctx = new (window.AudioContext || window.webkitAudioContext)();
          // Resume context for iOS
          if (ctx.state === 'suspended') {
            ctx.resume();
          }
          setAudioContext(ctx);
          return ctx;
        }
        return audioContext;
      };

      // Generate burp sound using Web Audio API
      const playBurp = () => {
        const ctx = initAudio();
        if (!ctx) return;
        
        const oscillator = ctx.createOscillator();
        const gainNode = ctx.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(ctx.destination);
        
        // Random burp characteristics
        const burpType = Math.floor(Math.random() * 3);
        
        if (burpType === 0) {
          // Short burp
          oscillator.frequency.setValueAtTime(80, ctx.currentTime);
          oscillator.frequency.exponentialRampToValueAtTime(40, ctx.currentTime + 0.15);
          gainNode.gain.setValueAtTime(0.3, ctx.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.15);
          oscillator.start(ctx.currentTime);
          oscillator.stop(ctx.currentTime + 0.15);
        } else if (burpType === 1) {
          // Medium burp with vibrato
          oscillator.frequency.setValueAtTime(100, ctx.currentTime);
          oscillator.frequency.exponentialRampToValueAtTime(45, ctx.currentTime + 0.3);
          gainNode.gain.setValueAtTime(0.35, ctx.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.3);
          oscillator.start(ctx.currentTime);
          oscillator.stop(ctx.currentTime + 0.3);
        } else {
          // Long, deep burp
          oscillator.frequency.setValueAtTime(120, ctx.currentTime);
          oscillator.frequency.exponentialRampToValueAtTime(35, ctx.currentTime + 0.5);
          gainNode.gain.setValueAtTime(0.4, ctx.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.5);
          oscillator.start(ctx.currentTime);
          oscillator.stop(ctx.currentTime + 0.5);
        }
        
        oscillator.type = 'sawtooth';
      };

      // Generate "yuck" sound for vegetables
      const playYuck = () => {
        const ctx = initAudio();
        if (!ctx) return;
        
        const oscillator = ctx.createOscillator();
        const gainNode = ctx.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(ctx.destination);
        
        // Descending "yuck" sound
        oscillator.frequency.setValueAtTime(800, ctx.currentTime);
        oscillator.frequency.exponentialRampToValueAtTime(200, ctx.currentTime + 0.3);
        
        gainNode.gain.setValueAtTime(0.3, ctx.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.3);
        
        oscillator.type = 'square';
        oscillator.start(ctx.currentTime);
        oscillator.stop(ctx.currentTime + 0.3);
      };

      // Generate slobbering/eating sound for good food
      const playSlober = () => {
        const ctx = initAudio();
        if (!ctx) return;
        
        const oscillator = ctx.createOscillator();
        const gainNode = ctx.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(ctx.destination);
        
        // Wet slobbering sound with quick frequency changes
        oscillator.frequency.setValueAtTime(300, ctx.currentTime);
        oscillator.frequency.linearRampToValueAtTime(180, ctx.currentTime + 0.05);
        oscillator.frequency.linearRampToValueAtTime(250, ctx.currentTime + 0.1);
        oscillator.frequency.linearRampToValueAtTime(150, ctx.currentTime + 0.15);
        oscillator.frequency.linearRampToValueAtTime(200, ctx.currentTime + 0.2);
        
        gainNode.gain.setValueAtTime(0.25, ctx.currentTime);
        gainNode.gain.linearRampToValueAtTime(0.35, ctx.currentTime + 0.05);
        gainNode.gain.linearRampToValueAtTime(0.25, ctx.currentTime + 0.1);
        gainNode.gain.linearRampToValueAtTime(0.3, ctx.currentTime + 0.15);
        gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.25);
        
        oscillator.type = 'triangle';
        oscillator.start(ctx.currentTime);
        oscillator.stop(ctx.currentTime + 0.25);
      };

      // Generate crowd cheer sound
      const playCrowdCheer = () => {
        const ctx = initAudio();
        if (!ctx) return;
        
        // Create multiple oscillators for a "crowd" effect
        for (let i = 0; i < 5; i++) {
          setTimeout(() => {
            const oscillator = ctx.createOscillator();
            const gainNode = ctx.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(ctx.destination);
            
            // Rising cheer sound
            oscillator.frequency.setValueAtTime(200 + Math.random() * 300, ctx.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(600 + Math.random() * 400, ctx.currentTime + 0.5);
            
            gainNode.gain.setValueAtTime(0.1, ctx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.5);
            
            oscillator.type = 'sine';
            oscillator.start(ctx.currentTime);
            oscillator.stop(ctx.currentTime + 0.5);
          }, i * 50);
        }
      };

      // Generate slide whistle sound for game over
      const playSlideWhistle = () => {
        const ctx = initAudio();
        if (!ctx) return;
        
        const oscillator = ctx.createOscillator();
        const gainNode = ctx.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(ctx.destination);
        
        // Long descending slide whistle
        oscillator.frequency.setValueAtTime(2000, ctx.currentTime);
        oscillator.frequency.exponentialRampToValueAtTime(200, ctx.currentTime + 2);
        
        gainNode.gain.setValueAtTime(0.3, ctx.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 2);
        
        oscillator.type = 'sine';
        oscillator.start(ctx.currentTime);
        oscillator.stop(ctx.currentTime + 2);
      };

      // Generate chicken clucking sound
      const playChickenCluck = () => {
        const ctx = initAudio();
        if (!ctx) return;
        
        // Multiple quick clucks
        for (let i = 0; i < 3; i++) {
          setTimeout(() => {
            const oscillator = ctx.createOscillator();
            const gainNode = ctx.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(ctx.destination);
            
            // Quick cluck sound
            oscillator.frequency.setValueAtTime(800, ctx.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(400, ctx.currentTime + 0.08);
            
            gainNode.gain.setValueAtTime(0.3, ctx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.08);
            
            oscillator.type = 'square';
            oscillator.start(ctx.currentTime);
            oscillator.stop(ctx.currentTime + 0.08);
          }, i * 150);
        }
      };

      useEffect(() => {
        if (!gameStarted || celebrating || gameOver) return;

        const interval = setInterval(() => {
          // Add new food item
          const randomFood = FOODS[Math.floor(Math.random() * FOODS.length)];
          const newFood = {
            ...randomFood,
            id: Date.now() + Math.random(),
            x: Math.random() * 80 + 5, // 5-85% from left
            y: -10, // Start above screen
            speed: (Math.random() * 2 + 2) * speedMultiplier, // Speed increases with multiplier
          };
          
          setFoodItems(prev => [...prev, newFood]);
        }, 1500);

        return () => clearInterval(interval);
      }, [gameStarted, celebrating, speedMultiplier, gameOver]);

      useEffect(() => {
        if (!gameStarted || celebrating || gameOver) return;

        const moveInterval = setInterval(() => {
          setFoodItems(prev => 
            prev
              .map(food => ({ ...food, y: food.y + food.speed }))
              .filter(food => food.y < 110) // Remove off-screen items
          );
        }, 50);

        return () => clearInterval(moveInterval);
      }, [gameStarted, celebrating, gameOver]);

      const eatFood = (food) => {
        setMouthOpen(true);
        
        // Check if it's a vegetable
        if (food.isVegetable) {
          const newVeggieCount = vegetablesEaten + 1;
          setVegetablesEaten(newVeggieCount);
          playYuck();
          
          // Check for game over (3 vegetables)
          if (newVeggieCount >= 3) {
            setTimeout(() => {
              setGameOver(true);
              setFoodItems([]);
              playSlideWhistle();
            }, 500);
          }
          
          setFeedback({
            points: 0,
            name: `ü•¶ ${newVeggieCount}/3`,
            x: food.x,
            y: food.y,
          });
        } else {
          // Good food - add points
          const newScore = score + food.points;
          setScore(newScore);
          if (newScore > highScore) setHighScore(newScore);
          
          // Check for milestone
          if (newScore >= currentMilestone && !celebrating) {
            // Trigger celebration!
            setTimeout(() => startCelebration(), 500);
          }
          
          // Play slobbering sound for good food
          playSlober();
          // Random burp for good food (40% chance)
          if (Math.random() < 0.4) {
            setTimeout(() => playBurp(), 300);
          }
          
          setFeedback({
            points: food.points,
            name: food.name,
            x: food.x,
            y: food.y,
          });
        }

        setFoodItems(prev => prev.filter(f => f.id !== food.id));

        setTimeout(() => setMouthOpen(false), 200);
        setTimeout(() => setFeedback(null), 800);
      };

      const clickBonusChicken = () => {
        if (!bonusChicken) return;
        
        // Award 100 points
        const newScore = score + 100;
        setScore(newScore);
        if (newScore > highScore) setHighScore(newScore);
        
        // Play chicken sounds
        playChickenCluck();
        
        // Show bonus feedback
        setFeedback({
          points: 100,
          name: 'BONUS!',
          x: bonusChicken.x,
          y: bonusChicken.y,
        });
        
        // Check for milestone
        if (newScore >= currentMilestone && !celebrating) {
          setTimeout(() => startCelebration(), 500);
        }
        
        // Remove chicken
        setBonusChicken(null);
        
        setTimeout(() => setFeedback(null), 800);
      };

      const startCelebration = () => {
        setCelebrating(true);
        setFoodItems([]); // Clear existing food
        setVegetablesEaten(0); // Reset vegetable counter for new round
        setChickensSpawned(0); // Reset bonus chicken counter for new round
        setBonusChicken(null); // Clear any active bonus chicken
        playCrowdCheer();
        
        // Create celebration items
        const items = [];
        const emojis = celebrationType === 'candy' 
          ? ['üç¨', 'üç≠', 'üç´', 'üç∞', 'üéâ', '‚≠ê', '‚ú®']
          : ['üçï', 'üçî', 'üçó', 'üåÆ', 'üçñ', 'ü•ì', 'üç©'];
        
        for (let i = 0; i < 15; i++) {
          items.push({
            id: Date.now() + Math.random(),
            emoji: emojis[Math.floor(Math.random() * emojis.length)],
            x: Math.random() * 80 + 10,
            y: Math.random() * 80 + 10,
            angle: Math.random() * Math.PI * 2,
            speed: 0,
          });
        }
        setCelebrationItems(items);
        
        // End celebration after 7 seconds
        setTimeout(() => {
          setCelebrating(false);
          setCelebrationItems([]);
          setCurrentMilestone(prev => prev + 300);
          setSpeedMultiplier(prev => prev * 1.5);
          setCelebrationType(prev => prev === 'candy' ? 'figure8' : 'candy');
        }, 7000);
      };

      // Animate celebration items
      useEffect(() => {
        if (!celebrating || celebrationItems.length === 0) return;

        let animationFrame = 0;
        const animateInterval = setInterval(() => {
          animationFrame++;
          
          setCelebrationItems(prev => prev.map((item, index) => {
            if (celebrationType === 'candy') {
              // Dancing/bouncing animation
              return {
                ...item,
                x: item.x + Math.sin(animationFrame * 0.1 + index) * 2,
                y: item.y + Math.cos(animationFrame * 0.1 + index) * 2,
                angle: item.angle + 0.1,
              };
            } else {
              // Figure-8 pattern
              const t = (animationFrame + index * 20) * 0.05;
              const centerX = 50;
              const centerY = 40;
              const radius = 25;
              
              return {
                ...item,
                x: centerX + radius * Math.sin(t),
                y: centerY + radius * Math.sin(t) * Math.cos(t),
                angle: t,
              };
            }
          }));
        }, 50);

        return () => clearInterval(animateInterval);
      }, [celebrating, celebrationItems.length, celebrationType]);

      // Spawn bonus chicken twice per round
      useEffect(() => {
        if (!gameStarted || celebrating || gameOver || chickensSpawned >= 2) return;

        // Random delay between 3-15 seconds before spawning
        const spawnDelay = Math.random() * 12000 + 3000;
        
        const spawnTimer = setTimeout(() => {
          // Spawn chicken at random position
          setBonusChicken({
            x: Math.random() * 70 + 15, // 15-85% from left
            y: Math.random() * 60 + 20, // 20-80% from top
            id: Date.now(),
          });
          
          setChickensSpawned(prev => prev + 1);
          
          // Remove after 1.5 seconds
          setTimeout(() => {
            setBonusChicken(null);
          }, 1500);
        }, spawnDelay);

        return () => clearTimeout(spawnTimer);
      }, [gameStarted, celebrating, gameOver, chickensSpawned]);

      const startGame = () => {
        initAudio(); // Initialize audio for iOS
        setGameStarted(true);
        setScore(0);
        setFoodItems([]);
        setFeedback(null);
        setSpeedMultiplier(1);
        setCurrentMilestone(300);
        setCelebrating(false);
        setCelebrationItems([]);
        setCelebrationType('candy');
        setVegetablesEaten(0);
        setGameOver(false);
        setBonusChicken(null);
        setChickensSpawned(0);
      };

      const resetGame = () => {
        setGameStarted(false);
        setScore(0);
        setFoodItems([]);
        setFeedback(null);
        setSpeedMultiplier(1);
        setCurrentMilestone(300);
        setCelebrating(false);
        setCelebrationItems([]);
        setCelebrationType('candy');
        setVegetablesEaten(0);
        setGameOver(false);
        setBonusChicken(null);
        setChickensSpawned(0);
      };

      return (
        <div className="w-full h-screen bg-gradient-to-b from-red-600 via-orange-500 to-yellow-400 overflow-hidden relative font-mono">
          {/* Retro border effect */}
          <div className="absolute inset-0 border-8 border-yellow-300 pointer-events-none" style={{
            boxShadow: 'inset 0 0 20px rgba(0,0,0,0.5)'
          }}></div>

          {!gameStarted ? (
            <div className="flex flex-col items-center justify-center h-full relative z-10">
              <div className="bg-yellow-300 border-8 border-red-700 p-8 rounded-lg shadow-2xl text-center" style={{
                boxShadow: '0 10px 0 #8B0000, 0 15px 20px rgba(0,0,0,0.5)'
              }}>
                <h1 className="text-6xl font-black text-red-700 mb-4" style={{
                  textShadow: '4px 4px 0 #000, -2px -2px 0 #fff'
                }}>
                  BLITZ BUFFET!
                </h1>
                <p className="text-2xl text-gray-800 mb-6 font-bold">
                  Feed the hungry man!<br/>
                  Avoid vegetables!
                </p>
                <button
                  onClick={startGame}
                  className="bg-red-600 hover:bg-red-700 text-white text-3xl font-black py-4 px-12 rounded-lg border-4 border-red-900 transition-transform hover:scale-105 active:scale-95"
                  style={{
                    boxShadow: '0 6px 0 #8B0000, 0 10px 15px rgba(0,0,0,0.4)'
                  }}
                >
                  START GAME
                </button>
                {highScore > 0 && (
                  <p className="text-xl text-gray-800 mt-4 font-bold">
                    High Score: {highScore}
                  </p>
                )}
              </div>
            </div>
          ) : (
            <>
              {/* Score Display */}
              <div className="absolute top-4 left-4 bg-yellow-300 border-4 border-red-700 px-4 py-2 rounded-lg z-20" style={{
                boxShadow: '0 6px 0 #8B0000',
                maxWidth: '45%'
              }}>
                <div className="text-3xl font-black text-red-700 leading-tight">
                  SCORE: {score}
                </div>
                <div className="text-xs font-bold text-gray-700">
                  HIGH: {highScore}
                </div>
              </div>

              {/* Vegetable Counter - side by side */}
              <div className="absolute top-4 right-4 bg-red-600 border-4 border-black px-4 py-2 rounded-lg z-20" style={{
                boxShadow: '0 6px 0 #000',
                maxWidth: '45%'
              }}>
                <div className="text-3xl font-black text-white leading-tight">
                  ü•¶ {vegetablesEaten}/3
                </div>
              </div>

              {/* Hungry Man Character */}
              <div className="absolute bottom-8 left-1/2 transform -translate-x-1/2 z-10">
                <div className="relative">
                  {/* Bib */}
                  <div className="absolute top-16 left-1/2 transform -translate-x-1/2 w-32 h-24 bg-white rounded-b-full border-4 border-gray-800 z-0">
                    <div className="text-center text-2xl font-black text-red-600 mt-2">EAT!</div>
                  </div>
                  
                  {/* Head */}
                  <div className="relative z-10 bg-amber-200 w-40 h-40 rounded-full border-4 border-gray-800 flex items-center justify-center">
                    {/* Propeller Beanie Hat with Multiple Panels */}
                    {/* Bill/Visor */}
                    <div className="absolute top-2 left-1/2 transform -translate-x-1/2 translate-y-full w-20 h-6 bg-green-600 border-2 border-gray-800 rounded-b-xl" style={{
                      boxShadow: '0 3px 0 rgba(0,0,0,0.5)',
                      clipPath: 'ellipse(50% 40% at 50% 0%)'
                    }}></div>
                    
                    {/* Hat Crown - Multi-colored panels */}
                    <div className="absolute -top-6 left-1/2 transform -translate-x-1/2 w-36 h-14 border-4 border-gray-800 rounded-t-full overflow-hidden">
                      {/* Red panel (front center) */}
                      <div className="absolute inset-y-0 left-1/2 transform -translate-x-1/2 w-1/4 bg-red-600"></div>
                      {/* Yellow panel (left) */}
                      <div className="absolute inset-y-0 left-0 w-1/4 bg-yellow-400"></div>
                      {/* Blue panel (right of red) */}
                      <div className="absolute inset-y-0 left-3/4 w-1/4 bg-blue-600"></div>
                      {/* Blue panel (left of red) */}
                      <div className="absolute inset-y-0 left-1/4 w-1/4 bg-blue-600"></div>
                      
                      {/* Stitching lines */}
                      <div className="absolute inset-0" style={{
                        backgroundImage: 'linear-gradient(90deg, transparent 24%, rgba(255,255,255,0.3) 24.5%, rgba(255,255,255,0.3) 25.5%, transparent 26%, transparent 49%, rgba(255,255,255,0.3) 49.5%, rgba(255,255,255,0.3) 50.5%, transparent 51%, transparent 74%, rgba(255,255,255,0.3) 74.5%, rgba(255,255,255,0.3) 75.5%, transparent 76%)',
                      }}></div>
                    </div>
                    
                    {/* Button on top - multiple beads stacked */}
                    <div className="absolute -top-9 left-1/2 transform -translate-x-1/2 flex flex-col items-center">
                      <div className="w-4 h-4 bg-yellow-400 border-2 border-gray-800 rounded-full mb-0.5"></div>
                      <div className="w-5 h-5 bg-blue-700 border-2 border-gray-800 rounded-full"></div>
                    </div>
                    
                    {/* Propeller */}
                    <div className="absolute -top-14 left-1/2 transform -translate-x-1/2 w-32 h-3 bg-gradient-to-r from-blue-400 via-blue-600 to-blue-400 border-2 border-gray-800 rounded-full animate-spin" style={{
                      animationDuration: '0.3s',
                      boxShadow: '0 2px 4px rgba(0,0,0,0.3)'
                    }}>
                      <div className="absolute top-0 left-1/2 transform -translate-x-1/2 w-1 h-3 bg-gray-800"></div>
                    </div>
                    
                    {/* Eyes */}
                    <div className="absolute top-12 left-8 w-8 h-8 bg-white rounded-full border-2 border-gray-800">
                      <div className="absolute top-1 left-1 w-4 h-4 bg-black rounded-full"></div>
                    </div>
                    <div className="absolute top-12 right-8 w-8 h-8 bg-white rounded-full border-2 border-gray-800">
                      <div className="absolute top-1 left-1 w-4 h-4 bg-black rounded-full"></div>
                    </div>
                    
                    {/* Mouth */}
                    <div className={`absolute bottom-8 left-1/2 transform -translate-x-1/2 transition-all duration-200 ${
                      mouthOpen 
                        ? 'w-16 h-16 rounded-full bg-gray-900' 
                        : 'w-12 h-6 rounded-full bg-gray-900'
                    }`}>
                      {mouthOpen && (
                        <div className="absolute inset-2 bg-red-600 rounded-full"></div>
                      )}
                    </div>
                  </div>
                </div>
              </div>

              {/* Food Items */}
              {!celebrating && foodItems.map(food => (
                <button
                  key={food.id}
                  onClick={() => eatFood(food)}
                  className="absolute cursor-pointer hover:scale-110 transition-transform active:scale-90"
                  style={{
                    left: `${food.x}%`,
                    top: `${food.y}%`,
                    fontSize: '9rem',
                    filter: 'drop-shadow(0 4px 8px rgba(0,0,0,0.5))',
                  }}
                >
                  {food.emoji}
                </button>
              ))}

              {/* Bonus Chicken Bucket */}
              {bonusChicken && !celebrating && (
                <button
                  onClick={clickBonusChicken}
                  className="absolute cursor-pointer animate-pulse z-30"
                  style={{
                    left: `${bonusChicken.x}%`,
                    top: `${bonusChicken.y}%`,
                    fontSize: '10rem',
                    filter: 'drop-shadow(0 8px 16px rgba(255,215,0,0.8))',
                  }}
                >
                  üçó
                </button>
              )}

              {/* Celebration Items */}
              {celebrating && celebrationItems.map(item => (
                <div
                  key={item.id}
                  className="absolute pointer-events-none animate-pulse"
                  style={{
                    left: `${item.x}%`,
                    top: `${item.y}%`,
                    fontSize: '6rem',
                    transform: `rotate(${item.angle}rad)`,
                    filter: 'drop-shadow(0 4px 8px rgba(0,0,0,0.5))',
                    transition: 'all 0.05s linear',
                  }}
                >
                  {item.emoji}
                </div>
              ))}

              {/* Celebration Message */}
              {celebrating && (
                <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-40">
                  <div className="bg-yellow-300 border-8 border-red-700 px-12 py-6 rounded-lg" style={{
                    boxShadow: '0 10px 0 #8B0000, 0 15px 20px rgba(0,0,0,0.5)'
                  }}>
                    <div className="text-6xl font-black text-red-700 animate-bounce" style={{
                      textShadow: '4px 4px 0 #000, -2px -2px 0 #fff'
                    }}>
                      {currentMilestone} POINTS!
                    </div>
                    <div className="text-3xl font-black text-gray-800 text-center mt-2">
                      üéâ LEVEL UP! üéâ
                    </div>
                  </div>
                </div>
              )}

              {/* Game Over Screen */}
              {gameOver && (
                <div className="absolute inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50">
                  <div className="text-center">
                    <div className="bg-red-700 border-8 border-black px-16 py-8 rounded-lg mb-8" style={{
                      boxShadow: '0 10px 0 #000, 0 15px 20px rgba(0,0,0,0.8)'
                    }}>
                      <div className="text-8xl font-black text-yellow-300 animate-pulse" style={{
                        textShadow: '6px 6px 0 #000, -3px -3px 0 #fff'
                      }}>
                        YOU BLEW IT!
                      </div>
                      <div className="text-4xl font-black text-white mt-4">
                        Too many veggies! ü•¶ü•¶ü•¶
                      </div>
                      <div className="text-3xl font-bold text-yellow-300 mt-4">
                        Final Score: {score}
                      </div>
                      {score === highScore && score > 0 && (
                        <div className="text-2xl font-bold text-green-400 mt-2">
                          üèÜ NEW HIGH SCORE! üèÜ
                        </div>
                      )}
                    </div>
                    <button
                      onClick={resetGame}
                      className="bg-green-600 hover:bg-green-700 text-white text-3xl font-black py-4 px-12 rounded-lg border-4 border-green-900 transition-transform hover:scale-105 active:scale-95"
                      style={{
                        boxShadow: '0 6px 0 #14532d, 0 10px 15px rgba(0,0,0,0.4)'
                      }}
                    >
                      TRY AGAIN
                    </button>
                  </div>
                </div>
              )}

              {/* Feedback */}
              {feedback && (
                <div
                  className="absolute text-4xl font-black animate-bounce pointer-events-none z-30"
                  style={{
                    left: `${feedback.x}%`,
                    top: `${feedback.y}%`,
                    color: feedback.points > 0 ? '#22c55e' : '#ef4444',
                    textShadow: '2px 2px 0 #000, -1px -1px 0 #fff',
                  }}
                >
                  {feedback.points > 0 ? '+' : ''}{feedback.points}
                </div>
              )}
            </>
          )}

          {/* Retro Grid Background Pattern */}
          <div className="absolute inset-0 opacity-10 pointer-events-none" style={{
            backgroundImage: 'linear-gradient(rgba(0,0,0,0.3) 1px, transparent 1px), linear-gradient(90deg, rgba(0,0,0,0.3) 1px, transparent 1px)',
            backgroundSize: '50px 50px'
          }}></div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<BuffetGame />);
  </script>
</body>
</html>
